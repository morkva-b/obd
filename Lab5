CREATE LOGIN TenantUser WITH PASSWORD = 'Tenant123';
CREATE USER TenantUser FOR LOGIN TenantUser;

CREATE LOGIN BookerUser WITH PASSWORD = 'Booker123';
CREATE USER BookerUser FOR LOGIN BookerUser;

CREATE LOGIN AdminUser WITH PASSWORD = 'Admin123';
CREATE USER AdminUser FOR LOGIN 


GRANT SELECT, INSERT, UPDATE, DELETE ON dbo.Tenant TO TenantUser;
GRANT SELECT, INSERT, UPDATE, DELETE ON dbo.Lease TO TenantUser;

GRANT SELECT, INSERT, UPDATE, DELETE ON dbo.Bill TO BookerUser;
GRANT SELECT ON dbo.Bank TO BookerUser;
GRANT SELECT, INSERT, UPDATE ON dbo.EstateType TO BookerUser;

GRANT SELECT, INSERT, UPDATE, DELETE ON dbo.RealEstate TO AdminUser;
GRANT SELECT, INSERT, UPDATE, DELETE ON dbo.EstateType TO AdminUser;
GRANT SELECT, INSERT, UPDATE, DELETE ON dbo.Bank TO AdminUser;
GRANT SELECT, INSERT, UPDATE, DELETE ON dbo.Bill TO AdminUser;
GRANT SELECT, INSERT, UPDATE, DELETE ON dbo.Lease TO AdminUser;
GRANT SELECT, INSERT, UPDATE, DELETE ON dbo.Tenant TO AdminUser;


CREATE ROLE Tenant;
CREATE ROLE Booker;
CREATE ROLE Administrator


GRANT SELECT, INSERT, UPDATE, DELETE ON Bill TO Administrator;
GRANT SELECT, INSERT, UPDATE, DELETE ON Bank TO Administrator;

GRANT SELECT, INSERT, UPDATE, DELETE ON Tenant TO Tenant;
GRANT SELECT, INSERT, UPDATE, DELETE ON Lease TO Tenant;

GRANT SELECT ON Bill TO Booker;


ALTER ROLE Tenant ADD MEMBER TenantUser;
ALTER ROLE Booker ADD MEMBER BookerUser;
ALTER ROLE Administrator ADD MEMBER AdminUser;


REVOKE DELETE ON Lease TO Tenant;
ALTER ROLE Tenant DROP MEMBER TenantUser;

DROP ROLE Tenant;
DROP USER Tenant;
